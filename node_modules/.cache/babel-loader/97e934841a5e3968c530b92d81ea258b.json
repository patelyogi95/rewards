{"ast":null,"code":"/**\n * ag-grid-community - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components\n * @version v20.2.0\n * @link http://www.ag-grid.com/\n * @license MIT\n */\n\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __metadata = this && this.__metadata || function (k, v) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar baseFilter_1 = require(\"./baseFilter\");\n\nvar componentAnnotations_1 = require(\"../widgets/componentAnnotations\");\n\nvar utils_1 = require(\"../utils\");\n\nvar TextFilter =\n/** @class */\nfunction (_super) {\n  __extends(TextFilter, _super);\n\n  function TextFilter() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  TextFilter.prototype.getDefaultType = function () {\n    return baseFilter_1.BaseFilter.CONTAINS;\n  };\n\n  TextFilter.prototype.customInit = function () {\n    this.comparator = this.filterParams.textCustomComparator ? this.filterParams.textCustomComparator : TextFilter.DEFAULT_COMPARATOR;\n    this.formatter = this.filterParams.textFormatter ? this.filterParams.textFormatter : this.filterParams.caseSensitive == true ? TextFilter.DEFAULT_FORMATTER : TextFilter.DEFAULT_LOWERCASE_FORMATTER;\n\n    _super.prototype.customInit.call(this);\n  };\n\n  TextFilter.prototype.modelFromFloatingFilter = function (from) {\n    return {\n      type: this.selectedFilter,\n      filter: from,\n      filterType: 'text'\n    };\n  };\n\n  TextFilter.prototype.getApplicableFilterTypes = function () {\n    return [baseFilter_1.BaseFilter.EQUALS, baseFilter_1.BaseFilter.NOT_EQUAL, baseFilter_1.BaseFilter.STARTS_WITH, baseFilter_1.BaseFilter.ENDS_WITH, baseFilter_1.BaseFilter.CONTAINS, baseFilter_1.BaseFilter.NOT_CONTAINS];\n  };\n\n  TextFilter.prototype.bodyTemplate = function (type) {\n    var translate = this.translate.bind(this);\n    var fieldId = type == baseFilter_1.FilterConditionType.MAIN ? \"filterText\" : \"filterConditionText\";\n    return \"<div class=\\\"ag-filter-body\\\">\\n            <div class=\\\"ag-input-text-wrapper\\\">\\n                <input class=\\\"ag-filter-filter\\\" id=\" + fieldId + \" type=\\\"text\\\" placeholder=\\\"\" + translate('filterOoo', 'Filter...') + \"\\\"/>\\n            </div>\\n        </div>\";\n  };\n\n  TextFilter.prototype.initialiseFilterBodyUi = function (type) {\n    _super.prototype.initialiseFilterBodyUi.call(this, type);\n\n    this.addFilterChangedListener(type);\n    this.setFilter(this.filterConditionText, baseFilter_1.FilterConditionType.CONDITION);\n    this.setFilterType(this.selectedFilterCondition, baseFilter_1.FilterConditionType.CONDITION);\n  };\n\n  TextFilter.prototype.addFilterChangedListener = function (type) {\n    var _this = this;\n\n    var eElement = type === baseFilter_1.FilterConditionType.MAIN ? this.eFilterTextField : this.eFilterConditionTextField;\n    var debounceMs = this.getDebounceMs(this.filterParams);\n\n    var toDebounce = utils_1._.debounce(function () {\n      return _this.onFilterTextFieldChanged(type);\n    }, debounceMs);\n\n    this.addDestroyableEventListener(eElement, 'input', toDebounce);\n  };\n\n  TextFilter.prototype.refreshFilterBodyUi = function (type) {\n    var filterType = type === baseFilter_1.FilterConditionType.MAIN ? this.selectedFilter : this.selectedFilterCondition;\n\n    if (this.eFilterConditionTextField) {\n      this.addFilterChangedListener(baseFilter_1.FilterConditionType.CONDITION);\n    } // show / hide filter input, i.e. if custom filter has 'hideFilterInputField = true' or an empty filter\n\n\n    var filterInput = type === baseFilter_1.FilterConditionType.MAIN ? this.eFilterTextField : this.eFilterConditionTextField;\n\n    if (filterInput) {\n      var showFilterInput = !this.doesFilterHaveHiddenInput(filterType) && filterType !== baseFilter_1.BaseFilter.EMPTY;\n\n      utils_1._.setVisible(filterInput, showFilterInput);\n    }\n  };\n\n  TextFilter.prototype.afterGuiAttached = function () {\n    this.eFilterTextField.focus();\n  };\n\n  TextFilter.prototype.filterValues = function (type) {\n    return type === baseFilter_1.FilterConditionType.MAIN ? this.filterText : this.filterConditionText;\n  };\n\n  TextFilter.prototype.individualFilterPasses = function (params, type) {\n    var filterText = type == baseFilter_1.FilterConditionType.MAIN ? this.filterText : this.filterConditionText;\n    var filter = type == baseFilter_1.FilterConditionType.MAIN ? this.selectedFilter : this.selectedFilterCondition;\n    var customFilterOption = this.customFilterOptions[filter];\n\n    if (customFilterOption) {\n      // only execute the custom filter if a value exists or a value isn't required, i.e. input is hidden\n      if (filterText != null || customFilterOption.hideFilterInput) {\n        var cellValue = this.filterParams.valueGetter(params.node);\n        var formattedCellValue = this.formatter(cellValue);\n        return customFilterOption.test(filterText, formattedCellValue);\n      }\n    }\n\n    if (!filterText) {\n      return type === baseFilter_1.FilterConditionType.MAIN ? true : this.conditionValue === 'AND';\n    } else {\n      return this.checkIndividualFilter(params, filter, filterText);\n    }\n  };\n\n  TextFilter.prototype.checkIndividualFilter = function (params, filterType, filterText) {\n    var cellValue = this.filterParams.valueGetter(params.node);\n    var filterTextFormatted = this.formatter(filterText);\n\n    if (cellValue == null || cellValue === undefined) {\n      return filterType === baseFilter_1.BaseFilter.NOT_EQUAL || filterType === baseFilter_1.BaseFilter.NOT_CONTAINS;\n    }\n\n    var valueFormatted = this.formatter(cellValue);\n    return this.comparator(filterType, valueFormatted, filterTextFormatted);\n  };\n\n  TextFilter.prototype.onFilterTextFieldChanged = function (type) {\n    var value = type === baseFilter_1.FilterConditionType.MAIN ? this.eFilterTextField.value : this.eFilterConditionTextField.value;\n    var current = type === baseFilter_1.FilterConditionType.MAIN ? this.filterText : this.filterConditionText;\n\n    var filterText = utils_1._.makeNull(value);\n\n    if (filterText && filterText.trim() === '') {\n      filterText = null;\n    }\n\n    if (current !== filterText) {\n      var newLowerCase = filterText && this.filterParams.caseSensitive != true ? filterText.toLowerCase() : filterText;\n      var previousLowerCase = current && this.filterParams.caseSensitive != true ? current.toLowerCase() : current;\n\n      if (type === baseFilter_1.FilterConditionType.MAIN) {\n        this.filterText = this.formatter(filterText);\n      } else {\n        this.filterConditionText = this.formatter(filterText);\n      }\n\n      if (previousLowerCase !== newLowerCase) {\n        this.onFilterChanged();\n      }\n    }\n  };\n\n  TextFilter.prototype.setFilter = function (filter, type) {\n    filter = utils_1._.makeNull(filter);\n\n    if (type === baseFilter_1.FilterConditionType.MAIN) {\n      if (filter) {\n        this.filterText = this.formatter(filter);\n\n        if (!this.eFilterTextField) {\n          return;\n        }\n\n        this.eFilterTextField.value = filter;\n      } else {\n        this.filterText = null;\n\n        if (!this.eFilterTextField) {\n          return;\n        }\n\n        this.eFilterTextField.value = null;\n      }\n    } else {\n      if (filter) {\n        this.filterConditionText = this.formatter(filter);\n\n        if (!this.eFilterConditionTextField) {\n          return;\n        }\n\n        this.eFilterConditionTextField.value = filter;\n      } else {\n        this.filterConditionText = null;\n\n        if (!this.eFilterConditionTextField) {\n          return;\n        }\n\n        this.eFilterConditionTextField.value = null;\n      }\n    }\n  };\n\n  TextFilter.prototype.getFilter = function () {\n    return this.filterText;\n  };\n\n  TextFilter.prototype.resetState = function (resetConditionFilterOnly) {\n    if (resetConditionFilterOnly === void 0) {\n      resetConditionFilterOnly = false;\n    }\n\n    if (!resetConditionFilterOnly) {\n      this.setFilterType(this.defaultFilter, baseFilter_1.FilterConditionType.MAIN);\n      this.setFilter(null, baseFilter_1.FilterConditionType.MAIN);\n    }\n\n    this.setFilterType(this.defaultFilter, baseFilter_1.FilterConditionType.CONDITION);\n    this.setFilter(null, baseFilter_1.FilterConditionType.CONDITION);\n  };\n\n  TextFilter.prototype.serialize = function (type) {\n    var filter = type === baseFilter_1.FilterConditionType.MAIN ? this.selectedFilter : this.selectedFilterCondition;\n    var filterText = type === baseFilter_1.FilterConditionType.MAIN ? this.filterText : this.filterConditionText;\n    return {\n      type: filter ? filter : this.defaultFilter,\n      filter: filterText,\n      filterType: 'text'\n    };\n  };\n\n  TextFilter.prototype.parse = function (model, type) {\n    this.setFilterType(model.type, type);\n    this.setFilter(model.filter, type);\n  };\n\n  TextFilter.prototype.setType = function (filterType, type) {\n    this.setFilterType(filterType, type);\n  };\n\n  TextFilter.DEFAULT_FORMATTER = function (from) {\n    return from;\n  };\n\n  TextFilter.DEFAULT_LOWERCASE_FORMATTER = function (from) {\n    if (from == null) {\n      return null;\n    }\n\n    return from.toString().toLowerCase();\n  };\n\n  TextFilter.DEFAULT_COMPARATOR = function (filter, value, filterText) {\n    switch (filter) {\n      case TextFilter.CONTAINS:\n        return value.indexOf(filterText) >= 0;\n\n      case TextFilter.NOT_CONTAINS:\n        return value.indexOf(filterText) === -1;\n\n      case TextFilter.EQUALS:\n        return value === filterText;\n\n      case TextFilter.NOT_EQUAL:\n        return value != filterText;\n\n      case TextFilter.STARTS_WITH:\n        return value.indexOf(filterText) === 0;\n\n      case TextFilter.ENDS_WITH:\n        var index = value.lastIndexOf(filterText);\n        return index >= 0 && index === value.length - filterText.length;\n\n      default:\n        // should never happen\n        console.warn('invalid filter type ' + filter);\n        return false;\n    }\n  };\n\n  __decorate([componentAnnotations_1.QuerySelector('#filterText'), __metadata(\"design:type\", HTMLInputElement)], TextFilter.prototype, \"eFilterTextField\", void 0);\n\n  __decorate([componentAnnotations_1.QuerySelector('#filterConditionText'), __metadata(\"design:type\", HTMLInputElement)], TextFilter.prototype, \"eFilterConditionTextField\", void 0);\n\n  return TextFilter;\n}(baseFilter_1.ComparableBaseFilter);\n\nexports.TextFilter = TextFilter;","map":null,"metadata":{},"sourceType":"script"}